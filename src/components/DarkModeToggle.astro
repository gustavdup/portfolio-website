<button
  id="dark-toggle-btn"
  aria-label="Toggle dark mode"
  class="p-2 rounded-lg transition-colors hover:bg-accent/10 dark:hover:bg-accent/10 focus:outline-none focus:ring-2 focus:ring-accent/30 dark:focus:ring-accent/30"
>
  <svg id="dark-toggle-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700 dark:text-gray-300 hover-accent transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.66-13.66l-.71.71M4.05 19.07l-.71.71M21 12h-1M4 12H3m16.66 5.66l-.71-.71M4.05 4.93l-.71-.71M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
  </svg>
</button>

<script is:inline>
  function initDarkMode() {
    setIcon();
  }

  function setIcon() {
    const icon = document.getElementById('dark-toggle-icon');
    if (!icon) return;
    
    if (document.documentElement.classList.contains('dark')) {
      // In dark mode, show sun icon (to switch to light)
      icon.outerHTML = `<svg id="dark-toggle-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700 dark:text-gray-300 hover-accent transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.66-13.66l-.71.71M4.05 19.07l-.71.71M21 12h-1M4 12H3m16.66 5.66l-.71-.71M4.05 4.93l-.71-.71M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>`;
    } else {
      // In light mode, show moon icon (to switch to dark)
      icon.outerHTML = `<svg id="dark-toggle-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700 dark:text-gray-300 hover-accent transition-colors" fill="currentColor" viewBox="0 0 20 20">
        <path d="M17.293 13.293A8 8 0 0 1 6.707 2.707a8.001 8.001 0 1 0 10.586 10.586z" />
      </svg>`;
    }
  }

  function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
    const isDark = document.documentElement.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    setIcon();
  }

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', initDarkMode);

  // Add click event listener
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('dark-toggle-btn');
    if (btn) {
      btn.addEventListener('click', toggleDarkMode);
    }
  });
</script>


